[
    {
        "label": "FastAPI",
        "importPath": "fastapi",
        "description": "fastapi",
        "isExtraImport": true,
        "detail": "fastapi",
        "documentation": {}
    },
    {
        "label": "BaseModel",
        "importPath": "pydantic",
        "description": "pydantic",
        "isExtraImport": true,
        "detail": "pydantic",
        "documentation": {}
    },
    {
        "label": "joblib",
        "kind": 6,
        "isExtraImport": true,
        "importPath": "joblib",
        "description": "joblib",
        "detail": "joblib",
        "documentation": {}
    },
    {
        "label": "numpy",
        "kind": 6,
        "isExtraImport": true,
        "importPath": "numpy",
        "description": "numpy",
        "detail": "numpy",
        "documentation": {}
    },
    {
        "label": "os",
        "kind": 6,
        "isExtraImport": true,
        "importPath": "os",
        "description": "os",
        "detail": "os",
        "documentation": {}
    },
    {
        "label": "datetime",
        "importPath": "datetime",
        "description": "datetime",
        "isExtraImport": true,
        "detail": "datetime",
        "documentation": {}
    },
    {
        "label": "sqlite3",
        "kind": 6,
        "isExtraImport": true,
        "importPath": "sqlite3",
        "description": "sqlite3",
        "detail": "sqlite3",
        "documentation": {}
    },
    {
        "label": "pandas",
        "kind": 6,
        "isExtraImport": true,
        "importPath": "pandas",
        "description": "pandas",
        "detail": "pandas",
        "documentation": {}
    },
    {
        "label": "RandomForestRegressor",
        "importPath": "sklearn.ensemble",
        "description": "sklearn.ensemble",
        "isExtraImport": true,
        "detail": "sklearn.ensemble",
        "documentation": {}
    },
    {
        "label": "ActivityData",
        "kind": 6,
        "importPath": "main",
        "description": "main",
        "peekOfCode": "class ActivityData(BaseModel):\n    steps: int\n    weight: float\n    hour: int\n# --- API ENDPOINTS ---\n@app.post(\"/calculate_calories\")\nasync def calculate_calories(data: ActivityData):\n    # 1. Run the Prediction\n    if model:\n        features = [[data.steps, data.weight, data.hour]]",
        "detail": "main",
        "documentation": {}
    },
    {
        "label": "init_db",
        "kind": 2,
        "importPath": "main",
        "description": "main",
        "peekOfCode": "def init_db():\n    \"\"\"Creates the database table if it doesn't exist.\"\"\"\n    conn = sqlite3.connect(DB_FILE)\n    cursor = conn.cursor()\n    # SQL Command: Create a table with columns for Time, Steps, and Calories\n    cursor.execute('''\n        CREATE TABLE IF NOT EXISTS logs (\n            id INTEGER PRIMARY KEY AUTOINCREMENT,\n            time TEXT,\n            steps INTEGER,",
        "detail": "main",
        "documentation": {}
    },
    {
        "label": "get_history",
        "kind": 2,
        "importPath": "main",
        "description": "main",
        "peekOfCode": "def get_history():\n    # 3. SQL SELECT: Read from Database\n    conn = sqlite3.connect(DB_FILE)\n    conn.row_factory = sqlite3.Row # This lets us access columns by name\n    cursor = conn.cursor()\n    # Get the last 20 entries, newest first\n    cursor.execute('SELECT * FROM logs ORDER BY id DESC LIMIT 20')\n    rows = cursor.fetchall()\n    conn.close()\n    # Convert SQL rows back to a Python list",
        "detail": "main",
        "documentation": {}
    },
    {
        "label": "home",
        "kind": 2,
        "importPath": "main",
        "description": "main",
        "peekOfCode": "def home():\n    return {\"status\": \"Online\", \"database\": \"SQLite\"}",
        "detail": "main",
        "documentation": {}
    },
    {
        "label": "app",
        "kind": 5,
        "importPath": "main",
        "description": "main",
        "peekOfCode": "app = FastAPI()\n# --- DATABASE SETUP ---\nDB_FILE = \"step_history.db\"\ndef init_db():\n    \"\"\"Creates the database table if it doesn't exist.\"\"\"\n    conn = sqlite3.connect(DB_FILE)\n    cursor = conn.cursor()\n    # SQL Command: Create a table with columns for Time, Steps, and Calories\n    cursor.execute('''\n        CREATE TABLE IF NOT EXISTS logs (",
        "detail": "main",
        "documentation": {}
    },
    {
        "label": "DB_FILE",
        "kind": 5,
        "importPath": "main",
        "description": "main",
        "peekOfCode": "DB_FILE = \"step_history.db\"\ndef init_db():\n    \"\"\"Creates the database table if it doesn't exist.\"\"\"\n    conn = sqlite3.connect(DB_FILE)\n    cursor = conn.cursor()\n    # SQL Command: Create a table with columns for Time, Steps, and Calories\n    cursor.execute('''\n        CREATE TABLE IF NOT EXISTS logs (\n            id INTEGER PRIMARY KEY AUTOINCREMENT,\n            time TEXT,",
        "detail": "main",
        "documentation": {}
    },
    {
        "label": "n_samples",
        "kind": 5,
        "importPath": "train_model",
        "description": "train_model",
        "peekOfCode": "n_samples = 5000 \n# 1. Generate Basic Features\nsteps = np.random.randint(100, 20000, n_samples)\nweight = np.random.uniform(50, 120, n_samples)\nhours = np.random.randint(0, 24, n_samples) # New Feature: 0 to 23 hours\n# 2. Define \"Intensity\" based on Time\n# If hour is between 6am and 10am, we assume high intensity (1.2x burn)\n# If hour is between 10pm and 5am, we assume low intensity (0.8x burn)\n# Otherwise normal (1.0)\nintensity_multiplier = []",
        "detail": "train_model",
        "documentation": {}
    },
    {
        "label": "steps",
        "kind": 5,
        "importPath": "train_model",
        "description": "train_model",
        "peekOfCode": "steps = np.random.randint(100, 20000, n_samples)\nweight = np.random.uniform(50, 120, n_samples)\nhours = np.random.randint(0, 24, n_samples) # New Feature: 0 to 23 hours\n# 2. Define \"Intensity\" based on Time\n# If hour is between 6am and 10am, we assume high intensity (1.2x burn)\n# If hour is between 10pm and 5am, we assume low intensity (0.8x burn)\n# Otherwise normal (1.0)\nintensity_multiplier = []\nfor h in hours:\n    if 6 <= h <= 10:",
        "detail": "train_model",
        "documentation": {}
    },
    {
        "label": "weight",
        "kind": 5,
        "importPath": "train_model",
        "description": "train_model",
        "peekOfCode": "weight = np.random.uniform(50, 120, n_samples)\nhours = np.random.randint(0, 24, n_samples) # New Feature: 0 to 23 hours\n# 2. Define \"Intensity\" based on Time\n# If hour is between 6am and 10am, we assume high intensity (1.2x burn)\n# If hour is between 10pm and 5am, we assume low intensity (0.8x burn)\n# Otherwise normal (1.0)\nintensity_multiplier = []\nfor h in hours:\n    if 6 <= h <= 10:\n        intensity_multiplier.append(1.2) # Morning Workout",
        "detail": "train_model",
        "documentation": {}
    },
    {
        "label": "hours",
        "kind": 5,
        "importPath": "train_model",
        "description": "train_model",
        "peekOfCode": "hours = np.random.randint(0, 24, n_samples) # New Feature: 0 to 23 hours\n# 2. Define \"Intensity\" based on Time\n# If hour is between 6am and 10am, we assume high intensity (1.2x burn)\n# If hour is between 10pm and 5am, we assume low intensity (0.8x burn)\n# Otherwise normal (1.0)\nintensity_multiplier = []\nfor h in hours:\n    if 6 <= h <= 10:\n        intensity_multiplier.append(1.2) # Morning Workout\n    elif 22 <= h or h <= 5:",
        "detail": "train_model",
        "documentation": {}
    },
    {
        "label": "intensity_multiplier",
        "kind": 5,
        "importPath": "train_model",
        "description": "train_model",
        "peekOfCode": "intensity_multiplier = []\nfor h in hours:\n    if 6 <= h <= 10:\n        intensity_multiplier.append(1.2) # Morning Workout\n    elif 22 <= h or h <= 5:\n        intensity_multiplier.append(0.8) # Late night shuffle\n    else:\n        intensity_multiplier.append(1.0) # Normal walking\nintensity_multiplier = np.array(intensity_multiplier)\n# 3. Calculate Calories with the new \"Smart\" formula",
        "detail": "train_model",
        "documentation": {}
    },
    {
        "label": "intensity_multiplier",
        "kind": 5,
        "importPath": "train_model",
        "description": "train_model",
        "peekOfCode": "intensity_multiplier = np.array(intensity_multiplier)\n# 3. Calculate Calories with the new \"Smart\" formula\n# Base Formula: Steps * 0.04 * WeightFactor\nbase_burn = (steps * 0.04) * (weight / 70)\n# Apply the Time Intelligence\ncalories = base_burn * intensity_multiplier\n# Add some noise (randomness) so the model has to learn the pattern\nnoise = np.random.normal(0, 5, n_samples)\ncalories = calories + noise\ncalories = np.maximum(calories, 0) # No negatives",
        "detail": "train_model",
        "documentation": {}
    },
    {
        "label": "base_burn",
        "kind": 5,
        "importPath": "train_model",
        "description": "train_model",
        "peekOfCode": "base_burn = (steps * 0.04) * (weight / 70)\n# Apply the Time Intelligence\ncalories = base_burn * intensity_multiplier\n# Add some noise (randomness) so the model has to learn the pattern\nnoise = np.random.normal(0, 5, n_samples)\ncalories = calories + noise\ncalories = np.maximum(calories, 0) # No negatives\n# 4. Train the Model\ndf = pd.DataFrame({\n    'steps': steps,",
        "detail": "train_model",
        "documentation": {}
    },
    {
        "label": "calories",
        "kind": 5,
        "importPath": "train_model",
        "description": "train_model",
        "peekOfCode": "calories = base_burn * intensity_multiplier\n# Add some noise (randomness) so the model has to learn the pattern\nnoise = np.random.normal(0, 5, n_samples)\ncalories = calories + noise\ncalories = np.maximum(calories, 0) # No negatives\n# 4. Train the Model\ndf = pd.DataFrame({\n    'steps': steps,\n    'weight': weight,\n    'hour': hours,       # <--- We feed this to the model now",
        "detail": "train_model",
        "documentation": {}
    },
    {
        "label": "noise",
        "kind": 5,
        "importPath": "train_model",
        "description": "train_model",
        "peekOfCode": "noise = np.random.normal(0, 5, n_samples)\ncalories = calories + noise\ncalories = np.maximum(calories, 0) # No negatives\n# 4. Train the Model\ndf = pd.DataFrame({\n    'steps': steps,\n    'weight': weight,\n    'hour': hours,       # <--- We feed this to the model now\n    'calories': calories\n})",
        "detail": "train_model",
        "documentation": {}
    },
    {
        "label": "calories",
        "kind": 5,
        "importPath": "train_model",
        "description": "train_model",
        "peekOfCode": "calories = calories + noise\ncalories = np.maximum(calories, 0) # No negatives\n# 4. Train the Model\ndf = pd.DataFrame({\n    'steps': steps,\n    'weight': weight,\n    'hour': hours,       # <--- We feed this to the model now\n    'calories': calories\n})\nX = df[['steps', 'weight', 'hour']]",
        "detail": "train_model",
        "documentation": {}
    },
    {
        "label": "calories",
        "kind": 5,
        "importPath": "train_model",
        "description": "train_model",
        "peekOfCode": "calories = np.maximum(calories, 0) # No negatives\n# 4. Train the Model\ndf = pd.DataFrame({\n    'steps': steps,\n    'weight': weight,\n    'hour': hours,       # <--- We feed this to the model now\n    'calories': calories\n})\nX = df[['steps', 'weight', 'hour']]\ny = df['calories']",
        "detail": "train_model",
        "documentation": {}
    },
    {
        "label": "df",
        "kind": 5,
        "importPath": "train_model",
        "description": "train_model",
        "peekOfCode": "df = pd.DataFrame({\n    'steps': steps,\n    'weight': weight,\n    'hour': hours,       # <--- We feed this to the model now\n    'calories': calories\n})\nX = df[['steps', 'weight', 'hour']]\ny = df['calories']\nmodel = RandomForestRegressor(n_estimators=100, random_state=42)\nmodel.fit(X, y)",
        "detail": "train_model",
        "documentation": {}
    },
    {
        "label": "X",
        "kind": 5,
        "importPath": "train_model",
        "description": "train_model",
        "peekOfCode": "X = df[['steps', 'weight', 'hour']]\ny = df['calories']\nmodel = RandomForestRegressor(n_estimators=100, random_state=42)\nmodel.fit(X, y)\nprint(\"âœ… Smart Model Trained!\")\n# Test: Compare 5000 steps at 8 AM vs 8 PM\nmorning_pred = model.predict([[5000, 70, 8]])[0]  # 8 AM\nnight_pred =   model.predict([[5000, 70, 20]])[0] # 8 PM (20:00)\nprint(f\"â˜€ï¸ Morning Walk (5000 steps): {morning_pred:.2f} kcal\")\nprint(f\"ðŸŒ™ Night Walk   (5000 steps): {night_pred:.2f} kcal\")",
        "detail": "train_model",
        "documentation": {}
    },
    {
        "label": "y",
        "kind": 5,
        "importPath": "train_model",
        "description": "train_model",
        "peekOfCode": "y = df['calories']\nmodel = RandomForestRegressor(n_estimators=100, random_state=42)\nmodel.fit(X, y)\nprint(\"âœ… Smart Model Trained!\")\n# Test: Compare 5000 steps at 8 AM vs 8 PM\nmorning_pred = model.predict([[5000, 70, 8]])[0]  # 8 AM\nnight_pred =   model.predict([[5000, 70, 20]])[0] # 8 PM (20:00)\nprint(f\"â˜€ï¸ Morning Walk (5000 steps): {morning_pred:.2f} kcal\")\nprint(f\"ðŸŒ™ Night Walk   (5000 steps): {night_pred:.2f} kcal\")\njoblib.dump(model, \"calorie_model.pkl\")",
        "detail": "train_model",
        "documentation": {}
    },
    {
        "label": "model",
        "kind": 5,
        "importPath": "train_model",
        "description": "train_model",
        "peekOfCode": "model = RandomForestRegressor(n_estimators=100, random_state=42)\nmodel.fit(X, y)\nprint(\"âœ… Smart Model Trained!\")\n# Test: Compare 5000 steps at 8 AM vs 8 PM\nmorning_pred = model.predict([[5000, 70, 8]])[0]  # 8 AM\nnight_pred =   model.predict([[5000, 70, 20]])[0] # 8 PM (20:00)\nprint(f\"â˜€ï¸ Morning Walk (5000 steps): {morning_pred:.2f} kcal\")\nprint(f\"ðŸŒ™ Night Walk   (5000 steps): {night_pred:.2f} kcal\")\njoblib.dump(model, \"calorie_model.pkl\")",
        "detail": "train_model",
        "documentation": {}
    },
    {
        "label": "morning_pred",
        "kind": 5,
        "importPath": "train_model",
        "description": "train_model",
        "peekOfCode": "morning_pred = model.predict([[5000, 70, 8]])[0]  # 8 AM\nnight_pred =   model.predict([[5000, 70, 20]])[0] # 8 PM (20:00)\nprint(f\"â˜€ï¸ Morning Walk (5000 steps): {morning_pred:.2f} kcal\")\nprint(f\"ðŸŒ™ Night Walk   (5000 steps): {night_pred:.2f} kcal\")\njoblib.dump(model, \"calorie_model.pkl\")",
        "detail": "train_model",
        "documentation": {}
    },
    {
        "label": "night_pred",
        "kind": 5,
        "importPath": "train_model",
        "description": "train_model",
        "peekOfCode": "night_pred =   model.predict([[5000, 70, 20]])[0] # 8 PM (20:00)\nprint(f\"â˜€ï¸ Morning Walk (5000 steps): {morning_pred:.2f} kcal\")\nprint(f\"ðŸŒ™ Night Walk   (5000 steps): {night_pred:.2f} kcal\")\njoblib.dump(model, \"calorie_model.pkl\")",
        "detail": "train_model",
        "documentation": {}
    }
]